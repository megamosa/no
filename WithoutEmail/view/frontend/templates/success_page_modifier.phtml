<?php
// Get Config Helper from ObjectManager
$objectManager = \Magento\Framework\App\ObjectManager::getInstance();
$configHelper = $objectManager->get(\MagoArab\WithoutEmail\Helper\Config::class);
if (!$configHelper->isEnabled()) return;
?>
<script>
require(['jquery', 'domReady!'], function($) {
    'use strict';
    
    $(function() {
        // Find and hide email address text
        $('*:contains("Email Address:")').each(function() {
            var $element = $(this);
            var text = $element.text();
            
            if (text.includes('Email Address:') && text.includes('@')) {
                // Get the parent element that contains the email display
                var $container = $element.closest('div, p, span');
                
                // Create phone tracking message
                var phoneNumber = text.match(/[0-9]+(?=@)/);
                if (phoneNumber && phoneNumber[0]) {
                    var phoneMessage = 'You can track your order using your phone number: <strong>' + phoneNumber[0] + '</strong>';
                    // Replace content
                    $container.html(phoneMessage);
                } else {
                    // Just hide the element if we can't extract the phone number
                    $container.hide();
                }
            }
        });
    });
});
</script>